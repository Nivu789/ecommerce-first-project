
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Companion-Registration</title>
  <link rel="stylesheet" href="../../assets/css/register.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="../../controllers/UserController.js"></script>
  <link rel="stylesheet" href="/assets/css/maind134.css?v=3.4">
  
</head>
<body style="background-color: black;">
  <!-- <section class="vh-100 bg-image"
  style="background-image: url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp');">
  <div class="mask d-flex align-items-center h-100 gradient-custom-3">
    <div class="container h-100">
      <div class="row d-flex justify-content-center align-items-center" style="height: 50%;">
        <div class="col-12 col-md-9 col-lg-7 col-xl-6">
          <div class="card" style="border-radius: 15px;">
            <div class="card-body p-5">
              <h2 class="text-uppercase text-center">Create an account</h2>

              <form method="post" action="">

                <div class="form-outline mb-3">
                  <input type="text" id="form3Example1cg" class="form-control form-control-lg" name="name" required/>
                  <label class="form-label" for="form3Example1cg">Your Name</label>
                </div>

                <div class="form-outline mb-3">
                  <input type="email" id="email" class="form-control form-control-lg" name="email" pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$" required/>
                  <label class="form-label" for="form3Example3cg">Your Email</label>
                </div>

                <div class="form-outline mb-3">
                  <input type="text" id="form3Example4cg" class="form-control form-control-lg" name="phone" pattern="[0-9]{10}" required/>
                  <label class="form-label" for="form3Example4cg">Phone</label>
                </div>

          

                <div class="form-outline mb-3">
                  <input type="password" id="form3Example4cg" class="form-control form-control-lg" name="password" required/>
                  <label class="form-label" for="form3Example4cg">Password (Must be 8 characters long, should contain alteast 1 special character and atleat one uppercase character)</label>
                  <span id="passwordError" class="error-message"></span>
                </div>

                <div class="form-outline mb-4">
                  <input type="password" id="form3Example4cdg" class="form-control form-control-lg" name="cpassword" required/>
                  <label class="form-label" for="form3Example4cdg">Repeat your password</label>
                  <span id="cpasswordError" class="error-message"></span>
                </div>

                
                <div class="d-flex justify-content-center">
                  <button type="submit"
                    class="btn btn-success btn-block btn-lg gradient-custom-4 text-body">Register</button>
                </div>
                
                
                <p class="text-center text-muted mt-5 mb-0">Got a referral code? <a href="#coupon"
                  class="fw-bold text-body" href="" data-bs-toggle="collapse" class="collapsed"
                  aria-expanded="false"><u>Click here to claim the reward</u></a></p>

                  <div class="panel-collapse collapse coupon_form " id="coupon">
                    <div class="panel-body"> -->
                        <!-- <p class="mb-30 font-sm">If you have a coupon code, please apply it below.</p> -->
                        <!-- <form method="">
                            <div class="form-group">
                                <input type="text" class="form-control form-control-lg" placeholder="Enter Coupon Code..." name="couponCode"
                                    id="refCode">
                            </div><br>
                            <div class="form-group">
                                <button class="btn  btn-md btn-primary" id="applybutton" name="login"
                                    onclick="applyReferral(event)">Apply Coupon</button>
                            </div>
                            <p id="errorMessage"></p>
                        </form>
                    </div>
                </div> -->
                <!-- <script>
                  function applyReferral(event){
                    event.preventDefault();
                    console.log("Working")
                    fetch('/applyreferral',{
                      method:"POST",
                      headers:{
                        'Content-Type':'application/json'
                      },
                      body:JSON.stringify({
                        ref_code:document.getElementById('refCode').value
                      })
                    }).then(res=>{
                      if(res.ok){
                        console.log("Success")
                        return res.json()
                      }else{
                        console.log("Error")
                      }
                    }).then(data=>{
                      console.log(data)
                      if(data.error){
                        document.getElementById('errorMessage').textContent = `${data.error}`
                      }else if(data.success){
                        document.getElementById('errorMessage').textContent = `${data.success}`
                      }
                    })
                    .catch(error=>{
                      console.log(error)
                    })
                  }
                </script>
                <p class="text-center text-muted mt-5 mb-0">Already have an account? <a href="/"
                    class="fw-bold text-body"><u>Login here</u></a></p>
              </form>
              <div class="col-lg-6">
                  
                  
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section> -->

<header class="header-area header-style-5">
  <div class="header-top header-top-ptb-1 d-none d-lg-block">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-xl-3 col-lg-4">
          <div class="header-info">
            <ul>
              <li><i class="fi-rs-smartphone"></i> <a href="#">(+01) - 2345 - 6789</a></li>
              <li><i class="fi-rs-marker"></i><a href="page-contact.html">Our location</a></li>
            </ul>
          </div>
        </div>
        <div class="col-xl-6 col-lg-4">
          <div class="text-center">
            <!-- <div id="news-flash" class="d-inline-block">
              <ul>
                <li>Get great devices up to 50% off <a href="shop-grid-right.html">View details</a>
                </li>
                <li>Supper Value Deals - Save more with coupons</li>
                <li>Trendy 25silver jewelry, save up 35% off today <a
                    href="shop-grid-right.html">Shop now</a></li>
              </ul>
            </div> -->
          </div>
        </div>
        <div class="col-xl-3 col-lg-4">
          <div class="header-info header-info-right">
            <ul>
              <li>
                <a class="language-dropdown-active" href="#"> <i class="fi-rs-world"></i> English <i
                    class="fi-rs-angle-small-down"></i></a>
                <ul class="language-dropdown">
                  <li><a href="#"><img src="assets/imgs/theme/flag-fr.png" alt="">Français</a>
                  </li>
                  <li><a href="#"><img src="assets/imgs/theme/flag-dt.png" alt="">Deutsch</a></li>
                  <li><a href="#"><img src="assets/imgs/theme/flag-ru.png" alt="">Pусский</a></li>
                </ul>
              </li>
              
                <%if(locals.userData){%>
                  
                  <li><i class="fi-rs-user"></i><a href="/account?id=<%=userData._id%>">Account</a></li>
                  <li><a href="/logout">Logout</a></li>
                    <%}else{%>
                      
                      <li><a href="/login">Login</a></li>
                      <%}%>
              
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="header-bottom sticky-bar sticky-white-bg" style="background-color: white;">
    <div class="container">
      <div class="header-wrap header-space-between position-relative">
        <div class="logo logo-width-1">
          <a href="index.html"><img src="/assets/imgs/companion-high-resolution-logo-transparent.png" alt="logo"></a>
        </div>
        <div
          class="main-menu main-menu-grow main-menu-padding-1 main-menu-lh-1 main-menu-mrg-1 hm3-menu-padding d-none d-lg-block hover-boder">
          <nav>
            <ul>
              <li><a class="active" href="/">Home </a>
                <!-- <ul class="sub-menu">
                  <li><a href="index.html">Home 1</a></li>
                  <li><a href="index-2.html">Home 2</a></li>
                  <li><a href="index-3.html">Home 3</a></li>
                  <li><a href="index-4.html">Home 4</a></li>
                </ul> -->
              </li>
              <li><a href="shop-grid-right.html">Shop <i class="fi-rs-angle-down"></i></a>
                <ul class="sub-menu">
                  <!-- <li><a href="shop-grid-right.html">Shop Grid – Right Sidebar</a></li>
                  <li><a href="shop-grid-left.html">Shop Grid – Left Sidebar</a></li>
                  <li><a href="shop-list-right.html">Shop List – Right Sidebar</a></li>
                  <li><a href="shop-list-left.html">Shop List – Left Sidebar</a></li>
                  <li><a href="shop-fullwidth.html">Shop - Wide</a></li> -->
                  <!-- <li><a href="#">Single Product <i class="fi-rs-angle-right"></i></a>
                    <ul class="level-menu">
                      <li><a href="shop-product-right.html">Product – Right Sidebar</a></li>
                      <li><a href="shop-product-left.html">Product – Left Sidebar</a></li>
                      <li><a href="shop-product-full.html">Product – No sidebar</a></li>
                    </ul>
                  </li> -->
                  <!-- <li><a href="shop-filter.html">Shop – Filter</a></li> -->
                  <li><a href="shop-wishlist.html">Shop – Wishlist</a></li>
                  <li><a href="/cart">Shop – Cart</a></li>
                  <li><a href="shop-checkout.html">Shop – Checkout</a></li>
                  <!-- <li><a href="shop-compare.html">Shop – Compare</a></li> -->
                </ul>
              </li>
              <!-- <li class="position-static"><a href="#">Mega <i class="fi-rs-angle-down"></i></a>
                <ul class="mega-menu">
                  <li class="sub-mega-menu sub-mega-menu-width-22">
                    <a class="menu-title" href="#">Women's Fashion</a>
                    <ul>
                      <li><a href="shop-product-right.html">Dresses</a></li>
                      <li><a href="shop-product-right.html">Blouses & Shirts</a></li>
                      <li><a href="shop-product-right.html">Hoodies & Sweatshirts</a></li>
                      <li><a href="shop-product-right.html">Wedding Dresses</a></li>
                      <li><a href="shop-product-right.html">Prom Dresses</a></li>
                      <li><a href="shop-product-right.html">Cosplay Costumes</a></li>
                    </ul>
                  </li>
                  <li class="sub-mega-menu sub-mega-menu-width-22">
                    <a class="menu-title" href="#">Men's Fashion</a>
                    <ul>
                      <li><a href="shop-product-right.html">Jackets</a></li>
                      <li><a href="shop-product-right.html">Casual Faux Leather</a></li>
                      <li><a href="shop-product-right.html">Genuine Leather</a></li>
                      <li><a href="shop-product-right.html">Casual Pants</a></li>
                      <li><a href="shop-product-right.html">Sweatpants</a></li>
                      <li><a href="shop-product-right.html">Harem Pants</a></li>
                    </ul>
                  </li>
                  <li class="sub-mega-menu sub-mega-menu-width-22">
                    <a class="menu-title" href="#">Technology</a>
                    <ul>
                      <li><a href="shop-product-right.html">Gaming Laptops</a></li>
                      <li><a href="shop-product-right.html">Ultraslim Laptops</a></li>
                      <li><a href="shop-product-right.html">Tablets</a></li>
                      <li><a href="shop-product-right.html">Laptop Accessories</a></li>
                      <li><a href="shop-product-right.html">Tablet Accessories</a></li>
                    </ul>
                  </li>
                  <li class="sub-mega-menu sub-mega-menu-width-34">
                    <div class="menu-banner-wrap">
                      <a href="shop-product-right.html"><img
                          src="assets/imgs/banner/menu-banner.jpg" alt="Evara"></a>
                      <div class="menu-banner-content">
                        <h4>Hot deals</h4>
                        <h3>Don't miss<br> Trending</h3>
                        <div class="menu-banner-price">
                          <span class="new-price text-success">Save to 50%</span>
                        </div>
                        <div class="menu-banner-btn">
                          <a href="shop-product-right.html">Shop now</a>
                        </div>
                      </div>
                      <div class="menu-banner-discount">
                        <h3>
                          <span>35%</span>
                          off
                        </h3>
                      </div>
                    </div>
                  </li>
                </ul>
              </li> -->
              <li><a href="blog-category-grid.html">Blog <i class="fi-rs-angle-down"></i></a>
                <ul class="sub-menu">
                  <li><a href="blog-category-grid.html">Blog Category Grid</a></li>
                  <li><a href="blog-category-list.html">Blog Category List</a></li>
                  <li><a href="blog-category-big.html">Blog Category Big</a></li>
                  <li><a href="blog-category-fullwidth.html">Blog Category Wide</a></li>
                  <li><a href="#">Single Post <i class="fi-rs-angle-right"></i></a>
                    <ul class="level-menu level-menu-modify">
                      <li><a href="blog-post-left.html">Left Sidebar</a></li>
                      <li><a href="blog-post-right.html">Right Sidebar</a></li>
                      <li><a href="blog-post-fullwidth.html">No Sidebar</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><a href="#">Pages <i class="fi-rs-angle-down"></i></a>
                <ul class="sub-menu">
                  <li><a href="page-about.html">About Us</a></li>
                  <li><a href="page-contact.html">Contact</a></li>
                  <li><a href="page-account.html">My Account</a></li>
                  <li><a href="page-login-register.html">login/register</a></li>
                  <li><a href="page-purchase-guide.html">Purchase Guide</a></li>
                  <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                  <li><a href="page-terms.html">Terms of Service</a></li>
                  <li><a href="page-404.html">404 Page</a></li>
                </ul>
              </li>
              <li>
                <a href="page-contact.html">Contact</a>
              </li>
            </ul>
          </nav>
        </div>
        <div class="header-action-right">
          <!-- <div class="search-style-2">
            <form action="#">
              <select class="select-active">
                <option>Search in</option>
                <option>Women's Clothing</option>
                <option>Men's Clothing</option>
                <option>Cellphones</option>
                <option>Computer & Office</option>
                <option>Consumer Electronics</option>
                <option>Jewelry & Accessories</option>
                <option>Home & Garden</option>
                <option>Luggage & Bags</option>
                <option>Shoes</option>
                <option>Mother & Kids</option>
              </select>
              <input type="text" placeholder="Search for items…">
            </form>
          </div> -->
          <div class="header-action-2">
            <div class="header-action-icon-2">
              <div class="header-action-icon-2">
                <%if(locals.userData){%>
                  <a href="/wishlist?id=<%=userData._id%>">
                    <img class="svgInject" alt="Evara" src="assets/imgs/theme/icons/icon-heart.svg">
                    <span class="pro-count blue"><%=wishListData.products.length%></span>
                  </a>
                  <%}else{%>
                    <a href="#">
                      <img class="svgInject" alt="Evara" src="assets/imgs/theme/icons/icon-heart.svg">
                      <!-- <span class="pro-count blue"></span> -->
                    </a>
                    <%}%>
                
              </div>
              <!-- <a href="shop-wishlist.html">
                <img class="svgInject" alt="Evara" src="assets/imgs/theme/icons/icon-heart.svg">
                <span class="pro-count blue">4</span>
              </a> -->
            </div>
            <div class="header-action-icon-2">
              <a class="mini-cart-icon" href="/cart">
                <img alt="Evara" src="assets/imgs/theme/icons/icon-cart.svg">
                <%if(locals.userData){%>
                  <span class="pro-count blue"><%=userData.cart.length%></span>
                  <%}%>
                
              </a>
              <!-- <div class="cart-dropdown-wrap cart-dropdown-hm2">
                <ul>
                  <li>
                    <div class="shopping-cart-img">
                      <a href="shop-product-right.html"><img alt="Evara"
                          src="assets/imgs/shop/thumbnail-3.jpg"></a>
                    </div>
                    <div class="shopping-cart-title">
                      <h4><a href="shop-product-right.html">Plain Striola Shirts</a></h4>
                      <h3><span>1 × </span>$800.00</h3>
                    </div>
                    <div class="shopping-cart-delete">
                      <a href="#"><i class="fi-rs-cross-small"></i></a>
                    </div>
                  </li>
                  <li>
                    <div class="shopping-cart-img">
                      <a href="shop-product-right.html"><img alt="Evara"
                          src="assets/imgs/shop/thumbnail-1.jpg"></a>
                    </div>
                    <div class="shopping-cart-title">
                      <h4><a href="shop-product-right.html">Macbook Pro 2022</a></h4>
                      <h3><span>1 × </span>$3200.00</h3>
                    </div>
                    <div class="shopping-cart-delete">
                      <a href="#"><i class="fi-rs-cross-small"></i></a>
                    </div>
                  </li>
                </ul>
                <div class="shopping-cart-footer">
                  <div class="shopping-cart-total">
                    <h4>Total <span>$4000.00</span></h4>
                  </div>
                  <div class="shopping-cart-button">
                    <a href="shop-cart.html">View cart</a>
                    <a href="shop-checkout.html">Checkout</a>
                  </div>
                </div>
              </div> -->
            </div>
            <div class="header-action-icon d-block d-lg-none">
              <div class="burger-icon">
                <span class="burger-icon-top"></span>
                <span class="burger-icon-mid"></span>
                <span class="burger-icon-bottom"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>



<section class="vh-100">
  <div class="container py-3">
    <div class="row d-flex justify-content-center align-items-center h-100">
    <div class="col col-xl-10">
      <div class="card" style="border-radius: 1rem;">
      <div class="row g-0">
        <!-- <div class="col-md-6 col-lg-5 d-none d-md-block">
        <img src="/assets/imgs/login_photo.jpg"
          alt="login form" class="" style="border-radius: 1rem 0 0 1rem; height: 915px;"/>
        </div> -->
        <div class="col-md-6 col-lg-7 d-flex align-items-center">
        <div class="card-body p-4 p-lg-5 text-black">
  
          <form method="post" action="/register">
  
          <div class="d-flex align-items-center mb-3 pb-1">
            <i class="fas fa-cubes fa-2x me-3" style="color: #ff6219;"></i>
            <span class="h1 fw-bold mb-0">Register</span>
          </div>
  
          <h5 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px;">Sign into your account</h5>
          
          <div class="form-outline mb-4">
            <input type="text" id="form2Example17" class="form-control form-control-lg" name="name" required/>
            <label class="form-label" for="form2Example17">Name</label>
          </div>

          <div class="form-outline mb-4">
            <input type="email" id="form2Example17" class="form-control form-control-lg" name="email" pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$" required/>
            <label class="form-label" for="form2Example17">Email address</label>
          </div>
          
          <div class="form-outline mb-4">
            <input type="text" id="form2Example17" class="form-control form-control-lg" name="phone" pattern="[0-9]{10}" required/>
            <label class="form-label" for="form2Example17">Phone</label>
          </div>

          <div class="form-outline mb-4">
            <input type="password" id="form2Example27" class="form-control form-control-lg" name="password" required onkeyup="validatePassword()"/>
            <label class="form-label" for="form2Example27">Password</label>
          </div>
          
          <div class="form-outline mb-4">
            <input type="password" id="form2Example17" class="form-control form-control-lg" name="cpassword" required/>
            <label class="form-label" for="form2Example17">Confirm Password</label>
          </div>

          <p class="text-center text-muted mt-5 mb-0">Got a referral code? <a href="#coupon"
            class="fw-bold text-body" href="" data-bs-toggle="collapse" class="collapsed"
            aria-expanded="false"><u>Click here to claim the reward</u></a></p>

            <div class="panel-collapse collapse coupon_form " id="coupon">
              <div class="panel-body"> 
                  <p class="mb-30 font-sm">If you have a coupon code, please apply it below.</p> 
                  
                      <div class="form-group">
                          <input type="text" class="form-control form-control-lg" placeholder="Enter Coupon Code..." name="couponCode"
                              id="refCode">
                      </div><br>
                      <div class="form-group">
                          <button class="btn  btn-md btn-primary" id="applybutton" name="login"
                              onclick="applyReferral(event)">Apply Coupon</button>
                      </div>
                      <p id="errorMessage"></p>
                  
              </div>
              
          </div> 
          
          
          <div class="pt-1 mb-4">
            <button class="btn btn-dark btn-lg btn-block" type="submit">Register</button>
          </div>
         

        </form>
        

        <script>
          function applyReferral(event){
            event.preventDefault();
            console.log("Working")
            fetch('/applyreferral',{
              method:"POST",
              headers:{
                'Content-Type':'application/json'
              },
              body:JSON.stringify({
                ref_code:document.getElementById('refCode').value
              })
            }).then(res=>{
              if(res.ok){
                console.log("Success")
                return res.json()
              }else{
                console.log("Error")
              }
            }).then(data=>{
              console.log(data)
              if(data.error){
                document.getElementById('errorMessage').textContent = `${data.error}`
              }else if(data.success){
                document.getElementById('errorMessage').textContent = `${data.success}`
              }
            })
            .catch(error=>{
              console.log(error)
            })
          }
        </script>
          
  
          <a class="small text-muted" href="/forgotpassword">Forgot password?</a>
          <p class="mb-5 pb-lg-2" style="color: #393f81;">Already have an account? <a href="/login"
            style="color: #393f81;">Login here</a></p>
          <a href="#!" class="small text-muted">Terms of use.</a>
          <a href="#!" class="small text-muted">Privacy policy</a>
          
          
          
  
        </div>
        </div>
        <div class="col-md-6 col-lg-5 d-none d-md-block" style="background-color: #242f66; max-height: max-content; border-radius: 0 1rem 1rem 0;">
          
          </div>
      </div>
      </div>
    </div>
    </div>
  </div>
  </section>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="../../functions/swalRelated.js"></script>
<!-- <script src="../../assets/js/userFunctions.js"></script> -->
<%if(message==='0'){%>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      Swal.fire({
        title: 'Error!',
        text: 'You already got an account',
        icon: 'error',
        showConfirmButton:true,
        confirmButtonText: '<a href="/">Login to your account</a>',
        confirmButtonColor:'#0000'
      });
  });
  </script>
  <%}%>
  <%if(message==='1'){%>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        Swal.fire({
          title: 'Error!',
          text: "Passwords didn't match",
          icon: 'error',
          showConfirmButton:true,
          confirmButtonText: 'ok',
          confirmButtonColor:'yellow'
        });
    });
    </script>
    <%}%>
    <%if(message==='2'){%>
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          Swal.fire({
            title: 'Error!',
            text: 'Invalid Fields',
            icon: 'error',
            showConfirmButton:true,
            confirmButtonText: 'ok',
            confirmButtonColor:'yellow'
          });
      });
      </script>
      <%}%>
      <%if(message==='3'){%>
        <script>
          document.addEventListener('DOMContentLoaded', function() {
            Swal.fire({
              title: 'Error!',
              text: "Password didn't meet the requirements",
              icon: 'error',
              showConfirmButton:true,
              confirmButtonText: 'ok',
              confirmButtonColor:'black'
            });
        });
        </script>
        <%}%>

        <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
        <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
        <script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
        <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
        <script src="assets/js/plugins/slick.js"></script>
        <script src="assets/js/plugins/jquery.syotimer.min.js"></script>
        <script src="assets/js/plugins/wow.js"></script>
        <script src="assets/js/plugins/jquery-ui.js"></script>
        <script src="assets/js/plugins/perfect-scrollbar.js"></script>
        <script src="assets/js/plugins/magnific-popup.js"></script>
        <script src="assets/js/plugins/select2.min.js"></script>
        <script src="assets/js/plugins/waypoints.js"></script>
        <script src="assets/js/plugins/counterup.js"></script>
        <script src="assets/js/plugins/jquery.countdown.min.js"></script>
        <script src="assets/js/plugins/images-loaded.js"></script>
        <script src="assets/js/plugins/isotope.js"></script>
        <script src="assets/js/plugins/scrollup.js"></script>
        <script src="assets/js/plugins/jquery.vticker-min.js"></script>
</body>
</html>